{"ast":null,"code":"import _regeneratorRuntime from\"/home/thaddydore/Desktop/reddish-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/thaddydore/Desktop/reddish-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/thaddydore/Desktop/reddish-clone/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useDispatch}from'react-redux';import{editReply,deleteReply}from'../reducers/postCommentsReducer';import{notify}from'../reducers/notificationReducer';import DeleteDialog from'./DeleteDialog';import getErrorMsg from'../utils/getErrorMsg';import{TextField,Button,Typography}from'@material-ui/core';import{useCommentAndBtnsStyles}from'../styles/muiStyles';import SendIcon from'@material-ui/icons/Send';import EditIcon from'@material-ui/icons/Edit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ReplyAndButtons=function ReplyAndButtons(_ref){var isMobile=_ref.isMobile,reply=_ref.reply,postId=_ref.postId,commentId=_ref.commentId,user=_ref.user;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),editOpen=_useState2[0],setEditOpen=_useState2[1];var _useState3=useState(reply.replyBody),_useState4=_slicedToArray(_useState3,2),editInput=_useState4[0],setEditInput=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),submitting=_useState6[0],setSubmitting=_useState6[1];var dispatch=useDispatch();var classes=useCommentAndBtnsStyles();var handleEditReply=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setSubmitting(true);_context.next=4;return dispatch(editReply(postId,commentId,reply.id,editInput));case 4:setSubmitting(false);setEditOpen(false);dispatch(notify(\"Reply edited!\",'success'));_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);setSubmitting(false);dispatch(notify(getErrorMsg(_context.t0),'error'));case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function handleEditReply(){return _ref2.apply(this,arguments);};}();var handleReplyDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return dispatch(deleteReply(postId,commentId,reply.id));case 3:dispatch(notify(\"Reply deleted!\",'success'));_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);dispatch(notify(getErrorMsg(_context2.t0),'error'));case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function handleReplyDelete(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[!editOpen?/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:reply.replyBody}):/*#__PURE__*/_jsxs(\"div\",{className:classes.inputDiv,children:[/*#__PURE__*/_jsx(TextField,{multiline:true,required:true,fullWidth:true,rows:2,rowsMax:Infinity,value:editInput,onChange:function onChange(e){return setEditInput(e.target.value);},variant:\"outlined\",size:isMobile?'small':'medium'}),/*#__PURE__*/_jsxs(\"div\",{className:classes.submitBtns,children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setEditOpen(false);},color:\"primary\",variant:\"outlined\",size:\"small\",className:classes.cancelBtn,children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleEditReply,color:\"primary\",variant:\"contained\",startIcon:/*#__PURE__*/_jsx(SendIcon,{}),size:\"small\",disabled:submitting,children:submitting?'Updating':'Update'})]})]}),user&&user.id===reply.repliedBy.id&&/*#__PURE__*/_jsxs(\"div\",{className:classes.btnBar,children:[/*#__PURE__*/_jsx(Button,{size:\"small\",color:\"inherit\",startIcon:/*#__PURE__*/_jsx(EditIcon,{}),className:classes.btnStyle,onClick:function onClick(){return setEditOpen(function(prevState){return!prevState;});},children:\"Edit\"}),/*#__PURE__*/_jsx(DeleteDialog,{type:\"comment\",handleDelete:handleReplyDelete})]})]});};export default ReplyAndButtons;","map":{"version":3,"sources":["/home/thaddydore/Desktop/reddish-clone/client/src/components/ReplyAndButtons.js"],"names":["React","useState","useDispatch","editReply","deleteReply","notify","DeleteDialog","getErrorMsg","TextField","Button","Typography","useCommentAndBtnsStyles","SendIcon","EditIcon","ReplyAndButtons","isMobile","reply","postId","commentId","user","editOpen","setEditOpen","replyBody","editInput","setEditInput","submitting","setSubmitting","dispatch","classes","handleEditReply","id","handleReplyDelete","inputDiv","Infinity","e","target","value","submitBtns","cancelBtn","repliedBy","btnBar","btnStyle","prevState"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { editReply, deleteReply } from '../reducers/postCommentsReducer';\nimport { notify } from '../reducers/notificationReducer';\nimport DeleteDialog from './DeleteDialog';\nimport getErrorMsg from '../utils/getErrorMsg';\n\nimport { TextField, Button, Typography } from '@material-ui/core';\nimport { useCommentAndBtnsStyles } from '../styles/muiStyles';\nimport SendIcon from '@material-ui/icons/Send';\nimport EditIcon from '@material-ui/icons/Edit';\n\nconst ReplyAndButtons = ({ isMobile, reply, postId, commentId, user }) => {\n  const [editOpen, setEditOpen] = useState(false);\n  const [editInput, setEditInput] = useState(reply.replyBody);\n  const [submitting, setSubmitting] = useState(false);\n  const dispatch = useDispatch();\n  const classes = useCommentAndBtnsStyles();\n\n  const handleEditReply = async () => {\n    try {\n      setSubmitting(true);\n      await dispatch(editReply(postId, commentId, reply.id, editInput));\n      setSubmitting(false);\n      setEditOpen(false);\n      dispatch(notify(`Reply edited!`, 'success'));\n    } catch (err) {\n      setSubmitting(false);\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  const handleReplyDelete = async () => {\n    try {\n      await dispatch(deleteReply(postId, commentId, reply.id));\n      dispatch(notify(`Reply deleted!`, 'success'));\n    } catch (err) {\n      dispatch(notify(getErrorMsg(err), 'error'));\n    }\n  };\n\n  return (\n    <div>\n      {!editOpen ? (\n        <Typography variant=\"body2\">{reply.replyBody}</Typography>\n      ) : (\n        <div className={classes.inputDiv}>\n          <TextField\n            multiline\n            required\n            fullWidth\n            rows={2}\n            rowsMax={Infinity}\n            value={editInput}\n            onChange={(e) => setEditInput(e.target.value)}\n            variant=\"outlined\"\n            size={isMobile ? 'small' : 'medium'}\n          />\n          <div className={classes.submitBtns}>\n            <Button\n              onClick={() => setEditOpen(false)}\n              color=\"primary\"\n              variant=\"outlined\"\n              size=\"small\"\n              className={classes.cancelBtn}\n            >\n              Cancel\n            </Button>\n            <Button\n              onClick={handleEditReply}\n              color=\"primary\"\n              variant=\"contained\"\n              startIcon={<SendIcon />}\n              size=\"small\"\n              disabled={submitting}\n            >\n              {submitting ? 'Updating' : 'Update'}\n            </Button>\n          </div>\n        </div>\n      )}\n      {user && user.id === reply.repliedBy.id && (\n        <div className={classes.btnBar}>\n          <Button\n            size=\"small\"\n            color=\"inherit\"\n            startIcon={<EditIcon />}\n            className={classes.btnStyle}\n            onClick={() => setEditOpen((prevState) => !prevState)}\n          >\n            Edit\n          </Button>\n          <DeleteDialog type=\"comment\" handleDelete={handleReplyDelete} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ReplyAndButtons;\n"]},"metadata":{},"sourceType":"module"}